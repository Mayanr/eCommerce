<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Order Info</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
    header p, header a {
        display: inline-block;
        padding: 15px;
        color: white;
    }
    header a:hover{
        text-decoration: none;
        color: rgb(221, 189, 189);
    }
    header a:active {
        color: black;
    }
    header {
        background-color: darkred;
    }
    a#logout {
        margin-left: 70%;
    }
    table#order_items {
        width: 65%;
        margin: 10px;
        vertical-align: top;
    }
    aside {
        border: 1px solid black;
        display: inline-block;
        width: 25%;
        margin: 35px;
        padding: 10px;
    }
    div#wrapper {
        width: 65%;
        display: inline-block;
        vertical-align: top;
        margin: 35px;
    }
    div.info {
        padding: 20px 0;
    }
   .status, #totals {
        display: inline-block;
        width: 30%;
        margin:  0 15px;
        vertical-align: top;
    }
    #status_subtotal {
        margin-top: 50px;
    }
    #in_progress {
        background-color: lightgreen;
        border: 1px solid black;
        padding: 5px;
    }
    #cancelled {
        background-color: red;
        border: 1px solid black;
        padding: 5px;
    }
    #totals {
        border: 1px solid black;
        padding: 10px; 
    }
    p {
        padding: 0;
        margin: 0;
    }
    span{
        font-weight: bold;
    }
    </style>
</head>
<body>
    <header>
        <p>Dashboard</p>
        <a href='/dashboard/orders' >Orders</a>
        <a href='/dashboard/prods' >Products</a>
        <a id='logout' href='/admin_logout'>Log Out</a>     
    </header>
    
    <aside>
        <h2>Order ID: {{ selected_order.id }}</h2>

        <p>Email: <span>{{ selected_order.email }}</span></p>

        <div class = 'info'>
            <h4>Customer Shipping Info </h4>
            <p>First Name: <span>{{ selected_order.sh_fname }}</span></p>
            <p>Last Name: <span>{{ selected_order.sh_lname }}</span></p>
            <p>Address:
                <span> 
                    {{ selected_order.sh_address }}
                    {{ selected_order.sh_address2 }}
                </span>
                </p>
            <p>City: <span>{{ selected_order.sh_city }}</span></p>
            <p>State: <span>{{ selected_order.sh_state }}</span></p>
            <p>Zip: <span>{{ selected_order.sh_zip }}</span></p>
        </div>

        <div class = 'info'>
            <h4>Customer Billing Info </h4>
            <p>First Name: <span>{{ selected_order.b_fname }}</span></p>
            <p>Last Name: <span>{{ selected_order.b_lname }}</span></p>
            <p>Address:
                <span> 
                    {{ selected_order.b_address }}
                    {{ selected_order.b_address2 }}
                </span>
                </p>
            <p>City: <span>{{ selected_order.b_city }}</span></p>
            <p>State: <span>{{ selected_order.b_state }}</span></p>
            <p>Zip: <span>{{ selected_order.b_zip }}</span></p>


        </div>       
    </aside>

    <div id='wrapper'>
        <table id='order_items' class="table table-striped">
            <tr>
                <th scope="col">Item ID</th>
                <th scope="col">Product Name</th>
                <th scope="col">Price / Unit</th>
                <th scope="col">Quantity</th>
                <th scope="col">Total Cost</th>
            </tr>
            {% for detail in order_details %}
            <tr>
                <td>{{detail.includes_prod.id }}</td>
                <td>{{detail.includes_prod.name }}</td>
                <td>${{detail.includes_prod.price }}</td>
                <td>{{detail.quant }} </td>
                <td>${{detail.cost }}</td>
            </tr>
            {% endfor %}
        </table>
    <div id='status_subtotal'>
        {% if selected_order.status.progress == "order in process" %}
        <div class='status' id='in_progress'>
            <p>Status: <span>{{ selected_order.status.progress }}</span> </p>
        </div>
        {% elif selected_order.status.progress == "shipped" %}
        <div class='status' id='in_progress'>
            <p>Status: <span>{{ selected_order.status.progress }}</span> </p>
        </div>
        {% else %}
        <div class='status' id='cancelled'>
            <p>Status: <span>{{ selected_order.status.progress }}</span> </p>
        </div>
        {% endif %}
            <div id='totals'>
                <p>Sub Total: ${{ total|floatformat:2 }}</p>
                <p>Tax: ${{ tax|floatformat:2 }} </p>
                <p>Shipping: $5.00</p> 
                <p>Total Price: <span>${{ selected_order.total_cost |floatformat:2}}</span></p>
            </div>
        </div>
    </div> 
</body>
</html>